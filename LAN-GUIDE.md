# 动漫角色猜谜游戏 - 局域网模式使用指南

本指南将帮助你设置和使用局域网模式，让你可以与朋友在同一网络下一起游玩。

## 准备工作

1. 确保所有设备连接到同一个WiFi网络或局域网
2. 关闭电脑防火墙或添加应用例外
3. 确保没有其他程序占用3000、3001和5173端口

## 主机设置步骤

1. **配置防火墙**
   运行 `setup-firewall.bat` 脚本添加防火墙例外规则（需要管理员权限）

2. **启动服务**
   运行 `start-lan.bat` 脚本启动所有必要的服务
   - 该脚本会自动检测你的局域网IP地址
   - 显示其他玩家需要使用的URL

3. **邀请朋友**
   - 将显示的URL分享给你的朋友（例如：`http://192.168.1.100:5173`）
   - 创建一个多人游戏房间
   - 复制房间链接分享给朋友

## 客户端（朋友）步骤

1. 使用你分享的URL访问游戏（例如：`http://192.168.1.100:5173`）
2. 点击"多人模式"
3. 粘贴你分享的房间链接或直接访问该链接
4. 输入用户名并加入房间

## 故障排除

如果朋友无法连接到你的游戏，请尝试以下步骤：

### 1. 检查网络连接
- 确认所有设备都连接到同一网络
- 尝试让其他设备ping主机的IP地址

### 2. 检查防火墙设置
- 再次运行 `setup-firewall.bat`
- 或手动在Windows防火墙添加端口5173、3000和3001的例外

### 3. 检查IP地址
- 如果你有多个网络适配器（如以太网和WiFi），确保使用正确的IP地址
- 使用 `ipconfig` 命令查看所有网络适配器的IP地址

### 4. 端口可用性
- 使用 `netstat -ano | findstr :3000` 确认服务器正在监听端口
- 尝试关闭可能占用这些端口的其他应用程序

### 5. 重启应用
- 关闭所有服务并重新运行 `start-lan.bat`

## 注意事项

- 局域网模式仅适用于同一网络下的设备
- 服务器运行在启动脚本的电脑上，该电脑必须保持运行
- 关闭主机上的程序会断开所有玩家的连接 